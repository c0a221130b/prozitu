import os
from sys import byteorder

n = 4
dir_name = './ransom'

dir = os.listdir(dir_name)
files = [f for f in dir if os.path.isfile(os.path.join(dir_name, f))]

ngram_list = []

for i in range(len(files)):
    file_name = dir_name + '/' + files[i]
    file_length = os.path.getsize(file_name)
    with open(file_name, 'rb') as f:
        j = 0
        while j < file_length - n + 1:
            b = f.read(n)
            ngram = int.from_bytes(b, byteorder='big')
            if(ngram not in ngram_list):
                ngram_list.append(ngram)
                print(b)
            f.seek((1 - n), 1)
            j += 1

samples = [[0] * (len(ngram_list)+1) for i in range(len(files))]
#samples = [[0] * (len(ngram_list)+1)] * len(files)

dir_name = './ransom'

dir = os.listdir(dir_name)
files = [f for f in dir if os.path.isfile(os.path.join(dir_name, f))]

for i in range(0, len(samples)):
    file_name = dir_name + '/' + files[i]
    file_length = os.path.getsize(file_name)
    with open(file_name, 'rb') as f:
        samples[i][0] = 1
        j = 0
        while j < file_length - n + 1:
            b = f.read(n)
            ngram = int.from_bytes(b, byteorder='big')
            samples[i][ngram_list.index(ngram) + 1] = 1
            f.seek((1 - n), 1)
            j += 1
print(samples)